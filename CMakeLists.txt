OPTION(ENABLE_QYOTO "build Qyoto" ON)
OPTION(ENABLE_QSCINTILLA_SHARP "build QScintillaSharp" OFF)
OPTION(ENABLE_SOPRANO_SHARP "build SopranoSharp" OFF)
OPTION(ENABLE_PLASMA_SHARP "build PlasmaSharp" OFF)
OPTION(ENABLE_KHTML_SHARP "build KHTML" ON)
OPTION(ENABLE_KIMONO "build Kimono" ON)

SET(QYOTO_ENABLED "no")
SET(QSCINTILLA_SHARP_ENABLED "no")
SET(KIMONO_ENABLED "no")
SET(SOPRANO_SHARP_ENABLED "no")
SET(PLASMA_SHARP_ENABLED "no")
SET(KHTML_SHARP_ENABLED "no")

SET(KEYFILE ${CMAKE_CURRENT_SOURCE_DIR}/key.snk)

if(ENABLE_QYOTO)
    macro_optional_find_package (Mono)

    IF (NOT GMCS_EXECUTABLE)
        MESSAGE (STATUS "gmcs was not found on your system but is needed for Qyoto.")
    ENDIF (NOT GMCS_EXECUTABLE)

    IF (NOT GACUTIL_EXECUTABLE)
        MESSAGE (STATUS "gacutil was not found on your system but is needed for Qyoto.")
    ENDIF (NOT GACUTIL_EXECUTABLE)

    IF (GMCS_EXECUTABLE AND GACUTIL_EXECUTABLE)
        add_subdirectory( qyoto )
        set(QYOTO_ENABLED "yes")

	IF(ENABLE_QSCINTILLA_SHARP AND QSCINTILLA_FOUND)
		FIND_PACKAGE(QScintilla REQUIRED)
		SET(QSCINTILLA_SHARP_ENABLED "yes")
		ADD_SUBDIRECTORY(qscintilla)
	ENDIF(ENABLE_QSCINTILLA_SHARP AND QSCINTILLA_FOUND)
	
	IF(ENABLE_KIMONO)
		SET(KIMONO_ENABLED "yes")
		ADD_SUBDIRECTORY(kimono)
	ENDIF(ENABLE_KIMONO)
	
	IF(ENABLE_KHTML_SHARP)
		SET(KHTML_SHARP_ENABLED "yes")
		ADD_SUBDIRECTORY(khtml)
	ENDIF(ENABLE_KHTML_SHARP)
	
	IF(ENABLE_SOPRANO_SHARP AND Soprano_FOUND)
		SET(SOPRANO_SHARP_ENABLED "yes")
		ADD_SUBDIRECTORY(soprano)
	ENDIF(ENABLE_SOPRANO_SHARP AND Soprano_FOUND)
	
	IF(ENABLE_PLASMA_SHARP)
		SET(PLASMA_SHARP_ENABLED "yes")
		ADD_SUBDIRECTORY(plasma)
	ENDIF(ENABLE_PLASMA_SHARP)

    ENDIF (GMCS_EXECUTABLE AND GACUTIL_EXECUTABLE)
endif(ENABLE_QYOTO)

message(STATUS "Build Qyoto... " ${QYOTO_ENABLED})
message(STATUS "Build QScintillaSharp... " ${QSCINTILLA_SHARP_ENABLED})
message(STATUS "Build SopranoSharp... " ${SOPRANO_SHARP_ENABLED})
message(STATUS "Build PlasmaSharp... " ${PLASMA_SHARP_ENABLED})
message(STATUS "Build Kimono... " ${KIMONO_ENABLED})
message(STATUS "Build KHTMLSharp... " ${KHTML_SHARP_ENABLED})
